# Go back to base directory of script to copy files
ScriptDir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$ScriptDir"

# File copy
cp "Ponteggio/Clean-Architecture/8.0/Api.csproj" "$ProjectPath/src/Api/"
# Add additional cp lines as needed...

# Add all projects to solution
cd "$ProjectPath"
dotnet sln add $(find . -name "*.csproj")

# Add packages to each project
cd src/Api
dotnet add package FluentValidation --version 11.11.0
dotnet add package FluentValidation.DependencyInjectionExtensions --version 11.11.0
dotnet add package Microsoft.AspNetCore.OpenApi --version 8.0.14
dotnet add package Serilog.AspNetCore --version 9.0.0
dotnet add package Serilog.Enrichers.ClientInfo
dotnet add package Serilog.Enrichers.Environment
dotnet add package Serilog.Enrichers.Thread
dotnet add package Serilog.Settings.Configuration
dotnet add package Serilog.Sinks.Async
dotnet add package Serilog.Sinks.File
dotnet add package Serilog.Sinks.Seq
dotnet add package Swashbuckle.AspNetCore --version 8.1.0

cd ../Application
dotnet add package FluentValidation
dotnet add package FluentValidation.DependencyInjectionExtensions

cd ../Domain
dotnet add package Ardalis.SmartEnum --version 8.2.0

cd ../Infrastructure
dotnet add package Dapper --version 2.1.66
dotnet add package Microsoft.Data.Sqlite --version 9.0.3

# Finalize
cd "$ProjectPath"
dotnet clean
dotnet build

dotnet new tool-manifest
dotnet tool install Cake.Tool --version 5.0.0

echo "âœ… Solution and projects created successfully in $ProjectPath"

